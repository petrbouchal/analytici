---
title: "AnalÃ½za dat"
subtitle: "PilotnÃ­ program Å¡kolenÃ­ analytikÅ¯ 2022"
author: Å™Ã­jen 2022
format: 
  revealjs:
    theme: [dark, slides.scss]
    mathjax: null
    slide-level: 3
    progress: false
    preview-links: true
  
editor: visual
---

# ProÄ a jak

## ProÄ jste tu dnes vy?

## Co si chcete odnÃ©st??

## Co vÃ¡s na prÃ¡ci s daty Å¡tve?

## CÃ­le aneb co si dnes odnesete  {.center}

:::: columns
::: {.column .fragment}
-   obrÃ¡zek o stavu oboru analÃ½zy dat
-   principy pouÅ¾itelnÃ© s jakÃ½mkoli problÃ©mem a nÃ¡strojem
-   kde vzÃ­t veÅ™ejnÃ¡ data a jak si s nimi poradit
:::

::: {.column .fragment}
-   praktickÃ© provedenÃ­ nÄ›kterÃ½ch konceptÅ¯ z prvnÃ­ ÄÃ¡sti
-   tipy a triky pro prÃ¡ci s Excelem
-   tipy, kam dÃ¡l
:::

::::

### Co nenÃ­ cÃ­l

::: v-center-container
::: incremental

â¨‰ nauÄit se do hloubky statistiku

â¨‰ nauÄit se R, Python a git

â¨‰ pouÅ¡tÄ›t se do nestandardnÃ­ch typÅ¯ dat

â¨‰ zabrat vÅ¡e od popisnÃ© statistiky po strojovÃ© uÄenÃ­

:::
:::

### AnalytickÃ¡ prÃ¡ce dnes

<br>

. . .


DÅ¯vÄ›ra v analÃ½zy dÃ­ky

. . .

(1) porozumÄ›nÃ­ uÅ¾ivateli
(2) integritÄ› postupu
(3) komunikaci vÃ½sledkÅ¯

. . .

PrÃ¡ce v kÃ³du, ale zÃ¡roveÅˆ integrace analÃ½zy a interpretace

. . .

DatovÃ© produkty: nejen PDF reporty (web, interaktivita)

. . .

AgilnÃ­ pÅ™Ã­stup k datovÃ© analÃ½ze

### Analytik ğŸ§  a uÅ¾ivatel ğŸ‘€

<br>

Rychle reagovat

Moct navÃ¡zat na uÅ¾ udÄ›lanÃ©

DobÅ™e komunikovat: v prÅ¯bÄ›hu i vÃ½sledek

SÃ¡m/sama datÅ¯m dobÅ™e rozumÄ›t

ZÃ­skat si dÅ¯vÄ›ru: proces, kontrola kvality, transparentnost

### ğŸ“Š AnalÃ½za dat a ğŸ¢ veÅ™ejnÃ© hodnoty

<br>
<br>

:::: {.columns}
::: column
Transparentnost

Integrita 

Kontrola kvality

:::

::: column

Zkontrolovatelnost

Replikovatelnost

TechnickÃ½ â¨‰ sociÃ¡lnÃ­ rozmÄ›r

:::
::::

## Jak na to pÅ¯jdeme

## principy - postupy - techniky

### Jak budeme dnes pracovat ğŸ™

::: v-center-container
::: incremental


BezpeÄnÃ© prostÅ™edÃ­

VÅ¡ichni se uÄÃ­me (pilot!)

Je OK nevÄ›dÄ›t

:::
:::

# Kde data vzÃ­t

## 

:::columns

::: column

OtevÅ™enÃ¡ data

ÄŒSÃš <=> otevÅ™enÃ¡ data

ÄŒSÃš <=> data a metadata

ÄŒSÃš <=> Eurostat (nÄ›kdy lepÅ¡Ã­)

Data o Å¾ivotnÃ­m prostÅ™edÃ­

Geodata a ÄÃ­selnÃ­ky

:::

:::column

"OstatnÃ­ data"

VaÅ¡e tipy?


:::

:::

=> **Co to je za data? Kde se vzala? Kde je dokumentace?**

# Co s daty dÄ›lat

## MentÃ¡lnÃ­ model

![](images/whole-game.png)

::: footer
zdroj: https://r4ds.hadley.nz/whole-game.html
:::

### Teze pro postupy

::: v-center-container
::: incremental
-   **ÄŒiÅ¡tÄ›nÃ­ a zpracovÃ¡nÃ­ dat** jsou souÄÃ¡stÃ­ analÃ½zy
-   **Iterace**
-   VyplatÃ­ se investovat do rozumnÃ©ho **postupu a dokumentace**
-   **Vizualizace** nejen jako vÃ½stup, ale jako nÃ¡stroj analÃ½zy
:::
:::

## Neboli

## 

::: r-fit-text
> NenÃ­ to lineÃ¡rnÃ­ proces
:::

## 

::: r-fit-text
> Spolupracujete se svÃ½m budoucÃ­m jÃ¡.
>
> VaÅ¡e budoucÃ­ jÃ¡ vÃ¡m podÄ›kuje 
>
> (kolega\*ynÄ› taky)
:::

## 

::: r-fit-text
> Å½Ã¡dnÃ¡ analÃ½za
>
> nenÃ­ jednorÃ¡zovka
:::

## 

::: r-fit-text
> Postup + dokumentace =
>
> zkontrolovatelnost
>
> opakovatelnost
>
> automatizovatelnost
:::

# Na postupu a organizaci zÃ¡leÅ¾Ã­

## petrbouchal.xyz/analytici

## Co vÃ¡s Å¡tve, kdyÅ¾ otevÅ™ete nÄ›ÄÃ­ starÃ½ Excel nebo sloÅ¾ku s analÃ½zou?

## Jak tedy na to

::: columns
::: column
ğŸ“‹ Dokumentovat data, postup, soubory

ğŸ“¥ OddÄ›lit vstupnÃ­ data od analÃ½zy

ğŸ“‚ Organizace projektu na disku

(ğŸ‘©â€ğŸ’» Pracovat v kÃ³du ideÃ¡lnÄ› s open source nÃ¡stroji)

ğŸ”Œ (VytvÃ¡Å™et kompletnÃ­ opakovatelnÃ© workflow)
:::

::: column
ğŸ”¢ Verzovat analÃ½zu (kÃ³d) a pokud moÅ¾no i vÃ½stupy

âœ… VyuÅ¾Ã­vat strojovou validaci vstupÅ¯ a vÃ½stupÅ¯

(ğŸ“• PouÅ¾Ã­vat nÃ¡stroje na propojenÃ­ textu a kÃ³du: Jupyter, Rmarkdown, Quarto)

(ğŸ’½ Zaznamenat prostÅ™edÃ­, kde kÃ³d bÄ›Å¾Ã­)
:::
:::

## Jak to provÃ©st

### Organizace projektu

::: {.columns .v-center-container}
::: column
ğŸ“‚ data

ğŸ“‚ analyza

ğŸ“‚ vystupy

ğŸ“„ README.docx
:::

::: column
IdeÃ¡lnÄ› konzistentnÃ­ napÅ™Ã­Ä projekty
:::
:::

### NÃ¡zvy souborÅ¯

<br>

> "Naming things is hard"

âŒ `hotovo-final1-fin2.1led21.xlsx`

âœ… `report01-vypocty_20220926.xlsx`

-   popisnÃ½ nÃ¡zev - ÄitelnÃ½ pro lidi
-   standardnÃ­ formÃ¡t datumu (2022-10-23)
-   funguje abecednÃ­ Å™azenÃ­
-   lze strojovÄ› zpracovat - ÄitelnÃ½ pro stroj

### NÃ¡zvy promÄ›nnÃ½ch, sloupcÅ¯ aj.

<br>
<br>

-   konzistentnÄ› (CamelCase, snake_case, cesky, ÄŒesky)
-   strojovÃ¡ vs. lidskÃ¡ Äitelnost

### Organizace dat: tvary

<br>

Data majÃ­ rÅ¯znÃ© tvary: dlouhÃ¡, Å¡irokÃ¡, nÄ›co mezi

RÅ¯znÃ© tvary pro rÅ¯znÃ© ÃºÄely

- "dlouhÃ¡" data Äasto lepÅ¡Ã­ pro analÃ½zy
- Å¡irokÃ¡ pro ÄtenÃ­/srovnÃ¡nÃ­ oÄima

Dostat data do sprÃ¡vnÃ©ho tvaru je Ãºkol sÃ¡m o sobÄ›

Co identifukuje jednu Å™Ã¡dku?

### Organizace dat: tvary

::: center

<br>
ZÃ¡klad:

-   co informace, to buÅˆka/sloupec
-   co Å™Ã¡dek, to pozorovÃ¡nÃ­
-   co datovÃ¡ sada, to tabulka / list / objekt
-   ale: co je pozorovÃ¡nÃ­??

`pivot` - `unpivot`

`databÃ¡zovÃ¡ normalizace`

:::

### Organizace dat: dobrÃ© praxe

<br>

- co informace, to buÅˆka/sloupec
- Excel: co list, to tabulka
- Excel: data = text, ne formÃ¡t
- Excel: pÅ™Ã­mÃ¡ napojenÃ­ na zdroje
- Excel: pouÅ¾Ã­t funkci tabulky
- dokumentace (metadata / codebook) blÃ­zko dat
- data uklÃ¡dat nefiltrovanÃ¡, kurzor na zaÄÃ¡tku atd.
- udrÅ¾ovat informaci o pÅ¯vodu dat (jasnÃ© ID zdroje; URL)

## NaÄtenÃ­ dat

:::: {.columns}

::: {.column width="50%"}
- CSV / TSV / ; / ,
- pozor na formÃ¡ty (desetinnÃ© ÄÃ¡rky, mezery)
- datumy!
- znakovÃ¡ sada
- Excel: PowerQuery >> standard Excel
- NULL, --, -99, "_"
:::

::: {.column width="50%"}

![](images/historical_dates.png)

:::

::::


## ÄŒiÅ¡tÄ›nÃ­ dat

<br>

:::: {.columns}

::: {.column width="50%"}
CÃ­l: data vhodnÃ¡ pro analÃ½zu
:::

::: {.column width="50%"}

FormÃ¡ty

NepÅ™esnosti?

Duplicity?

ChybÄ›jÃ­cÃ­ data?

NesprÃ¡vnÃ© hodnoty?

ExtrÃ©mnÃ­ hodnoty?

:::

::::

## Transformace dat

### Å irokÃ¡

![](images/wide.png)

### DlouhÃ¡

![](images/long.png)

### DlouhÃ¡

![](images/long2.png)

### Å irokÃ¡

![](images/wide2-1.png)

### Å irokÃ¡

![](images/wide2-2.png)

### Å irokÃ¡

![](images/wide2-3.png)

### Transformace

![](images/tidyr-pivoting.gif)


::: footer
zdroj: https://www.garrickadenbuie.com/project/tidyexplain/
:::

### PropojovÃ¡nÃ­

![](images/left-join.gif)

::: footer
zdroj: https://www.garrickadenbuie.com/project/tidyexplain/
:::

### PropojovÃ¡nÃ­

![](images/left-join.gif)

::: footer
zdroj: https://www.garrickadenbuie.com/project/tidyexplain/
:::

### PropojovÃ¡nÃ­

![](images/right-join.gif)

::: footer
zdroj: https://www.garrickadenbuie.com/project/tidyexplain/
:::

### ProÄ se propojovÃ¡nÃ­ nedaÅ™Ã­

<br>
  
- mezery na zaÄÃ¡tku a konci
- velkÃ¡ a malÃ¡ pÃ­smena
- dvojitÃ© mezery

### ÄŒÃ­selnÃ­ky, klasifikace atd.

<br>

![](images/duplikatni-obce.png)

### ÄŒÃ­selnÃ­ky, klasifikace atd.

<br>

https://apl.czso.cz/iSMS/

https://www.cuzk.cz/ruian/Poskytovani-udaju-ISUI-RUIAN-VDP/Ciselniky-ISUI.aspx 

![](images/ciselnik-kraje.png)

### ProÄ ÄÃ­selnÃ­k nesedÃ­

<br>

- jinÃ½ ÄÃ­selnÃ­k
- jinÃ¡ verze ÄÃ­selnÃ­kÅ¯
- neshody mezi tvÅ¯rcem dat a tvÅ¯rcem ÄÃ­selnÃ­ku
  - je Praha okres?
  - jsou mÄ›stskÃ© ÄÃ¡sti Prahy ORP?

### ÄŒÃ­selnÃ­ky, klasifikace atd.

<br>

- pozor na platnost (ke kterÃ©mu datu?)
- pozor na verze (kraje, NUTS kraje, starÃ© NUTS kraje)
- kaÅ¾dÃ½ ÄÃ­selnÃ­k sprÃ¡vnÄ› mÃ¡ jednoho sprÃ¡vce
- ale jsou tu pÅ™ekryvy, sprÃ¡vci rÅ¯znÃ½ch dat obÄas zveÅ™ejÅˆujÃ­ duplicitnÃ­ ÄÃ­selnÃ­ky (napÅ™. MPSV k datÅ¯m o nezamÄ›stnanosti)

## VÃ½poÄty a modelovÃ¡nÃ­

---

:::r-fit-text

<br>
<br>

> ExploratornÃ­ datovÃ¡ analÃ½za

:::

### Explorace a poznÃ¡vÃ¡nÃ­ dat

<br>
<br>

:::: {.columns}

::: {.column width="50%"}

#### ProÄ

Poznat data

NajÃ­t problÃ©my

Poznat variabilitu

Detekovat pravidelnosti
:::

::: {.column width="50%"}

#### Jak

Koukat na data

Hledat podivnosti

Vizualizovat

SÄÃ­tat a porovnÃ¡vat

Zkoumat vÃ½seky dat
:::

::::


### Co lze v Excelu

<br>

SaÅ™adit si data

SouhrnnÃ© statistiky

KontingenÄnÃ­ tabulka

Histogram

Box plot

NÃ¡hled rozdÄ›lenÃ­ v PowerQuery

Heatmapy (podmÃ­nÄ›nÃ© formÃ¡tovÃ¡nÃ­)

ZÃ¡kladnÃ­ mapy (kraje)

Korelace, regrese, t-testy

# Kam dÃ¡l

## DalÅ¡Ã­ nÃ¡stroje

- Extrakce dat: OpenRefine, Tabula
- Vizualizace: Datawrapper, RawGraphs, Flourish
- InteraktivnÃ­: Google Data Studio, PowerBI
- RegulÃ©rnÃ­ vÃ½razy
  
## PrÃ¡ce s kÃ³dem

SQL a databÃ¡ze

R nebo Python?

=> automatizace

## Literate programming

ObservableJS

Jupyter Notebooks

R Markdown / Quarto

## VerzovÃ¡nÃ­ (git, Github)


